<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet.photon.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title>PETA INDEKS KEPEKAAN LINGKUNGAN TERHADAP OIL SPILL DI PULAU SEBESI</title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/leaflet-svg-shape-markers.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet.photon.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="data/SESITIVITAS_1.js"></script>
        <script src="data/Batas_Area_Unit_2.js"></script>
        <script src="data/Dusun_3.js"></script>
        <script src="data/Garis_Kontur1_4.js"></script>
        <script src="data/Jalan1_5.js"></script>
        <script src="data/Jembatan1_6.js"></script>
        <script src="data/Penginapan_7.js"></script>
        <script src="data/Sungai1_8.js"></script>
        <script>
        var map = L.map('map', {
            zoomControl:false, maxZoom:28, minZoom:5
        }).fitBounds([[-5.9766442477128745,105.40977167081157],[-5.878638602066309,105.60713707520996]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // modify popup if contains media
        function addClassToPopupIfMedia(content, popup) {
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = content;
            var imgTd = tempDiv.querySelector('td img');
            if (imgTd) {
                var src = imgTd.getAttribute('src');
                if (/\.(jpg|jpeg|png|gif|bmp|webp|avif)$/i.test(src)) {
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.update();
                    }, 10);
                } else if (/\.(mp3|wav|ogg|aac)$/i.test(src)) {
                    var audio = document.createElement('audio');
                    audio.controls = true;
                    audio.src = src;
                    imgTd.parentNode.replaceChild(audio, imgTd);
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else if (/\.(mp4|webm|ogg|mov)$/i.test(src)) {
                    var video = document.createElement('video');
                    video.controls = true;
                    video.src = src;
                    video.style.width = "400px";
                    video.style.height = "300px";
                    video.style.maxHeight = "60vh";
                    video.style.maxWidth = "60vw";
                    imgTd.parentNode.replaceChild(video, imgTd);
                    popup._contentNode.classList.add('media');
                    // Aggiorna il popup quando il video carica i metadati
                    video.addEventListener('loadedmetadata', function() {
                        popup.update();
                    });
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else {
                    popup._contentNode.classList.remove('media');
                }
            } else {
                popup._contentNode.classList.remove('media');
            }
        }
        var title = new L.Control({'position':'topright'});
        title.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'info');
            this.update();
            return this._div;
        };
        title.update = function () {
            this._div.innerHTML = '<h2>PETA INDEKS KEPEKAAN LINGKUNGAN TERHADAP OIL SPILL DI PULAU SEBESI</h2>';
        };
        title.addTo(map);
        var abstract = new L.Control({'position':'topright'});
        abstract.onAdd = function (map) {
            this._div = L.DomUtil.create('div',
            'leaflet-control abstract');
            this._div.id = 'abstract'
                this._div.setAttribute("onmouseenter", "abstract.show()");
                this._div.setAttribute("onmouseleave", "abstract.hide()");
                this.hide();
                return this._div;
            };
            abstract.hide = function () {
                this._div.classList.remove("abstractUncollapsed");
                this._div.classList.add("abstract");
                this._div.innerHTML = 'i'
            }
            abstract.show = function () {
                this._div.classList.remove("abstract");
                this._div.classList.add("abstractUncollapsed");
                this._div.innerHTML = 'Peta Indeks Kepekaan Lingkungan Pulau Sebesi disajikan dalam bentuk WebGIS sebagai sarana visualisasi spasial yang interaktif dan informatif untuk mendukung pengelolaan lingkungan pesisir dan pulau kecil. Indeks Kepekaan Lingkungan (IKL) dihitung berdasarkan pendekatan Composite Environmental Sensitivity Index (CESI) yang mengintegrasikan tiga komponen utama, yaitu Indeks Kerentanan (IK), Indeks Ekologis (IE), dan Indeks Sosial (IS). Nilai IKL diperoleh melalui persamaan IKL = 1/3 (IK + IE + IS), sehingga mencerminkan kondisi lingkungan secara menyeluruh dari aspek fisik, ekologi, dan sosial masyarakat.<br />Hasil perhitungan IKL diklasifikasikan ke dalam lima tingkat kepekaan lingkungan, yaitu Tidak Peka (1,0), Kurang Peka (1,1–2,0), Kepekaan Sedang (2,1–3,0), Peka (3,1–4,0), dan Sangat Peka (4,1–5,0), yang divisualisasikan dengan gradasi warna berbeda untuk memudahkan interpretasi. Melalui tampilan WebGIS, pengguna dapat mengakses informasi spasial secara dinamis, menelusuri tingkat kepekaan tiap wilayah, serta memahami potensi risiko dan prioritas pengelolaan lingkungan di Pulau Sebesi. WebGIS ini diharapkan menjadi alat pendukung pengambilan keputusan dalam perencanaan pembangunan berkelanjutan, mitigasi bencana, dan konservasi lingkungan wilayah pesisir';
        };
        abstract.addTo(map);
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        var measureControl = new L.Control.Measure({
            position: 'topleft',
            primaryLengthUnit: 'meters',
            secondaryLengthUnit: 'kilometers',
            primaryAreaUnit: 'sqmeters',
            secondaryAreaUnit: 'hectares'
        });
        measureControl.addTo(map);
        document.getElementsByClassName('leaflet-control-measure-toggle')[0].innerHTML = '';
        document.getElementsByClassName('leaflet-control-measure-toggle')[0].className += ' fas fa-ruler';
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_ESRISatelliteArcGISWorld_Imagery_0');
        map.getPane('pane_ESRISatelliteArcGISWorld_Imagery_0').style.zIndex = 400;
        var layer_ESRISatelliteArcGISWorld_Imagery_0 = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            pane: 'pane_ESRISatelliteArcGISWorld_Imagery_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 5,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_ESRISatelliteArcGISWorld_Imagery_0;
        map.addLayer(layer_ESRISatelliteArcGISWorld_Imagery_0);
        function pop_SESITIVITAS_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Kode Unit</th>\
                        <td class="visible-with-data" id="Kode_Unit">' + (feature.properties['Kode_Unit'] !== null ? autolinker.link(String(feature.properties['Kode_Unit']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Nama Unit</th>\
                        <td class="visible-with-data" id="Nama_Unit">' + (feature.properties['Nama_Unit'] !== null ? autolinker.link(String(feature.properties['Nama_Unit']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">IK</th>\
                        <td class="visible-with-data" id="IK">' + (feature.properties['IK'] !== null ? autolinker.link(String(feature.properties['IK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">IE</th>\
                        <td class="visible-with-data" id="IE">' + (feature.properties['IE'] !== null ? autolinker.link(String(feature.properties['IE']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">IS</th>\
                        <td class="visible-with-data" id="IS_">' + (feature.properties['IS_'] !== null ? autolinker.link(String(feature.properties['IS_']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">IKL</th>\
                        <td class="visible-with-data" id="IKL">' + (feature.properties['IKL'] !== null ? autolinker.link(String(feature.properties['IKL']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Klasifikasi</th>\
                        <td class="visible-with-data" id="Tingkat_Ke">' + (feature.properties['Tingkat_Ke'] !== null ? autolinker.link(String(feature.properties['Tingkat_Ke']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_SESITIVITAS_1_0(feature) {
            switch(String(feature.properties['Tingkat_Ke'])) {
                case 'Sedang':
                    return {
                pane: 'pane_SESITIVITAS_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(13,7,232,1.0)',
                interactive: true,
            }
                    break;
                case 'Peka':
                    return {
                pane: 'pane_SESITIVITAS_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(202,48,215,1.0)',
                interactive: true,
            }
                    break;
                case 'Sangat Peka':
                    return {
                pane: 'pane_SESITIVITAS_1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(254,5,44,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_SESITIVITAS_1');
        map.getPane('pane_SESITIVITAS_1').style.zIndex = 401;
        map.getPane('pane_SESITIVITAS_1').style['mix-blend-mode'] = 'normal';
        var layer_SESITIVITAS_1 = new L.geoJson(json_SESITIVITAS_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_SESITIVITAS_1',
            layerName: 'layer_SESITIVITAS_1',
            pane: 'pane_SESITIVITAS_1',
            onEachFeature: pop_SESITIVITAS_1,
            style: style_SESITIVITAS_1_0,
        });
        bounds_group.addLayer(layer_SESITIVITAS_1);
        map.addLayer(layer_SESITIVITAS_1);
        function pop_Batas_Area_Unit_2(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Ket</th>\
                        <td>' + (feature.properties['Ket'] !== null ? autolinker.link(String(feature.properties['Ket']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Batas_Area_Unit_2_0() {
            return {
                pane: 'pane_Batas_Area_Unit_2',
                opacity: 1,
                color: 'rgba(8,4,2,1.0)',
                dashArray: '1.0,2.0',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_Batas_Area_Unit_2');
        map.getPane('pane_Batas_Area_Unit_2').style.zIndex = 402;
        map.getPane('pane_Batas_Area_Unit_2').style['mix-blend-mode'] = 'normal';
        var layer_Batas_Area_Unit_2 = new L.geoJson(json_Batas_Area_Unit_2, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Batas_Area_Unit_2',
            layerName: 'layer_Batas_Area_Unit_2',
            pane: 'pane_Batas_Area_Unit_2',
            onEachFeature: pop_Batas_Area_Unit_2,
            style: style_Batas_Area_Unit_2_0,
        });
        bounds_group.addLayer(layer_Batas_Area_Unit_2);
        map.addLayer(layer_Batas_Area_Unit_2);
        function pop_Dusun_3(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">Ket</th>\
                        <td>' + (feature.properties['Ket'] !== null ? autolinker.link(String(feature.properties['Ket']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Dusun_3_0() {
            return {
                pane: 'pane_Dusun_3',
                radius: 7.6,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(4,4,1,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_Dusun_3');
        map.getPane('pane_Dusun_3').style.zIndex = 403;
        map.getPane('pane_Dusun_3').style['mix-blend-mode'] = 'normal';
        var layer_Dusun_3 = new L.geoJson(json_Dusun_3, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Dusun_3',
            layerName: 'layer_Dusun_3',
            pane: 'pane_Dusun_3',
            onEachFeature: pop_Dusun_3,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_Dusun_3_0(feature));
            },
        });
        bounds_group.addLayer(layer_Dusun_3);
        map.addLayer(layer_Dusun_3);
        function pop_Garis_Kontur1_4(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">REMARK</th>\
                        <td>' + (feature.properties['REMARK'] !== null ? autolinker.link(String(feature.properties['REMARK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Garis_Kontur1_4_0() {
            return {
                pane: 'pane_Garis_Kontur1_4',
                opacity: 1,
                color: 'rgba(178,179,182,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_Garis_Kontur1_4');
        map.getPane('pane_Garis_Kontur1_4').style.zIndex = 404;
        map.getPane('pane_Garis_Kontur1_4').style['mix-blend-mode'] = 'normal';
        var layer_Garis_Kontur1_4 = new L.geoJson(json_Garis_Kontur1_4, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Garis_Kontur1_4',
            layerName: 'layer_Garis_Kontur1_4',
            pane: 'pane_Garis_Kontur1_4',
            onEachFeature: pop_Garis_Kontur1_4,
            style: style_Garis_Kontur1_4_0,
        });
        bounds_group.addLayer(layer_Garis_Kontur1_4);
        map.addLayer(layer_Garis_Kontur1_4);
        function pop_Jalan1_5(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">REMARK</th>\
                        <td>' + (feature.properties['REMARK'] !== null ? autolinker.link(String(feature.properties['REMARK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Jalan1_5_0() {
            return {
                pane: 'pane_Jalan1_5',
                opacity: 1,
                color: 'rgba(10,2,1,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_Jalan1_5');
        map.getPane('pane_Jalan1_5').style.zIndex = 405;
        map.getPane('pane_Jalan1_5').style['mix-blend-mode'] = 'normal';
        var layer_Jalan1_5 = new L.geoJson(json_Jalan1_5, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Jalan1_5',
            layerName: 'layer_Jalan1_5',
            pane: 'pane_Jalan1_5',
            onEachFeature: pop_Jalan1_5,
            style: style_Jalan1_5_0,
        });
        bounds_group.addLayer(layer_Jalan1_5);
        map.addLayer(layer_Jalan1_5);
        function pop_Jembatan1_6(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">REMARK</th>\
                        <td>' + (feature.properties['REMARK'] !== null ? autolinker.link(String(feature.properties['REMARK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Jembatan1_6_0() {
            return {
                pane: 'pane_Jembatan1_6',
                radius: 12.8,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(9,4,5,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_Jembatan1_6');
        map.getPane('pane_Jembatan1_6').style.zIndex = 406;
        map.getPane('pane_Jembatan1_6').style['mix-blend-mode'] = 'normal';
        var layer_Jembatan1_6 = new L.geoJson(json_Jembatan1_6, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Jembatan1_6',
            layerName: 'layer_Jembatan1_6',
            pane: 'pane_Jembatan1_6',
            onEachFeature: pop_Jembatan1_6,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_Jembatan1_6_0(feature));
            },
        });
        bounds_group.addLayer(layer_Jembatan1_6);
        map.addLayer(layer_Jembatan1_6);
        function pop_Penginapan_7(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">REMARK</th>\
                        <td>' + (feature.properties['REMARK'] !== null ? autolinker.link(String(feature.properties['REMARK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Penginapan_7_0() {
            return {
                pane: 'pane_Penginapan_7',
                radius: 11.6,
                opacity: 1,
                color: 'rgba(3,2,1,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 2.0,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,0,0,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_Penginapan_7');
        map.getPane('pane_Penginapan_7').style.zIndex = 407;
        map.getPane('pane_Penginapan_7').style['mix-blend-mode'] = 'normal';
        var layer_Penginapan_7 = new L.geoJson(json_Penginapan_7, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Penginapan_7',
            layerName: 'layer_Penginapan_7',
            pane: 'pane_Penginapan_7',
            onEachFeature: pop_Penginapan_7,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.shapeMarker(latlng, style_Penginapan_7_0(feature));
            },
        });
        bounds_group.addLayer(layer_Penginapan_7);
        map.addLayer(layer_Penginapan_7);
        function pop_Sungai1_8(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">REMARK</th>\
                        <td>' + (feature.properties['REMARK'] !== null ? autolinker.link(String(feature.properties['REMARK']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_Sungai1_8_0() {
            return {
                pane: 'pane_Sungai1_8',
                opacity: 1,
                color: 'rgba(97,213,231,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_Sungai1_8');
        map.getPane('pane_Sungai1_8').style.zIndex = 408;
        map.getPane('pane_Sungai1_8').style['mix-blend-mode'] = 'normal';
        var layer_Sungai1_8 = new L.geoJson(json_Sungai1_8, {
            attribution: '',
            interactive: true,
            dataVar: 'json_Sungai1_8',
            layerName: 'layer_Sungai1_8',
            pane: 'pane_Sungai1_8',
            onEachFeature: pop_Sungai1_8,
            style: style_Sungai1_8_0,
        });
        bounds_group.addLayer(layer_Sungai1_8);
        map.addLayer(layer_Sungai1_8);
        var overlaysTree = [
            {label: '<img src="legend/Sungai1_8.png" /> Sungai1', layer: layer_Sungai1_8},
            {label: '<img src="legend/Penginapan_7.png" /> Penginapan', layer: layer_Penginapan_7},
            {label: '<img src="legend/Jembatan1_6.png" /> Jembatan1', layer: layer_Jembatan1_6},
            {label: '<img src="legend/Jalan1_5.png" /> Jalan1', layer: layer_Jalan1_5},
            {label: '<img src="legend/Garis_Kontur1_4.png" /> Garis_Kontur1', layer: layer_Garis_Kontur1_4},
            {label: '<img src="legend/Dusun_3.png" /> Dusun', layer: layer_Dusun_3},
            {label: '<img src="legend/Batas_Area_Unit_2.png" /> Batas_Area_Unit', layer: layer_Batas_Area_Unit_2},
            {label: 'SESITIVITAS<br /><table><tr><td style="text-align: center;"><img src="legend/SESITIVITAS_1_Sedang0.png" /></td><td>Sedang</td></tr><tr><td style="text-align: center;"><img src="legend/SESITIVITAS_1_Peka1.png" /></td><td>Peka</td></tr><tr><td style="text-align: center;"><img src="legend/SESITIVITAS_1_SangatPeka2.png" /></td><td>Sangat Peka</td></tr></table>', layer: layer_SESITIVITAS_1},
            {label: "ESRI Satellite (ArcGIS/World_Imagery)", layer: layer_ESRISatelliteArcGISWorld_Imagery_0},]
        var lay = L.control.layers.tree(null, overlaysTree,{
            //namedToggle: true,
            //selectorBack: false,
            //closedSymbol: '&#8862; &#x1f5c0;',
            //openedSymbol: '&#8863; &#x1f5c1;',
            //collapseAll: 'Collapse all',
            //expandAll: 'Expand all',
            collapsed: true,
        });
        lay.addTo(map);
        setBounds();
        var i = 0;
        layer_SESITIVITAS_1.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['Kode_Unit'] !== null?String('<div style="color: #0091ca; font-size: 10pt; font-style: italic; font-family: \'Cambria\', sans-serif;">' + layer.feature.properties['Kode_Unit']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_SESITIVITAS_1'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        resetLabels([layer_SESITIVITAS_1]);
        map.on("zoomend", function(){
            resetLabels([layer_SESITIVITAS_1]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_SESITIVITAS_1]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_SESITIVITAS_1]);
        });
        </script>        
    </body>
</html>
